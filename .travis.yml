branches:
  only:
  - master
language: c
os:
  - linux
  - osx
compiler:
  - clang
  - gcc
script: export HB_COMPILER=$CC && make
before_install:
  - if [ "$TRAVIS_OS_NAME" = "linux" ]; then
      sudo add-apt-repository -y ppa:ubuntu-toolchain-r/test;
      sudo apt-get update -qq;
      if [ "$CC" = "gcc" ]; then
         sudo apt-get install -qq -m gcc-5 g++-5;
         export HB_CCSUFFIX=-5;
         ls -lA /usr/bin/gcc*;
      fi;
      sudo apt-get install -qq -m firebird2.1-dev;
      sudo apt-get install -qq -m liballegro4.2-dev;
      sudo apt-get install -qq -m libcairo2-dev;
      sudo apt-get install -qq -m libcups2-dev;
      sudo apt-get install -qq -m libcurl4-openssl-dev;
      sudo apt-get install -qq -m libfreeimage-dev;
      sudo apt-get install -qq -m libgd2-xpm-dev;
      sudo apt-get install -qq -m libgpm-dev;
      sudo apt-get install -qq -m libgs-dev;
      sudo apt-get install -qq -m libmagic-dev;
      sudo apt-get install -qq -m libmysqlclient-dev;
      sudo apt-get install -qq -m libncurses-dev;
      sudo apt-get install -qq -m libpq-dev;
      sudo apt-get install -qq -m libslang2-dev;
      sudo apt-get install -qq -m unixodbc-dev;
    fi
  - if [ "$TRAVIS_OS_NAME" = "osx" ]; then
      brew update;
      brew install allegro;
      brew install cairo;
      brew install curl;
      brew install freeimage;
      brew install gd;
      brew install ghostscript;
      brew install libmagic;
      brew install mariadb;
      brew install ncurses;
      brew install postgresql;
      brew install slang;
      brew install unixodbc;
    fi
notifications:
  email: false
git:
  submodules: false
